// Variables
const filter = document.querySelector(".filter")
const filter_menu = document.querySelector(".filter-menu")
const checkbox_label = document.querySelector("#ordercheckbox")
const checkbox = document.querySelector('#order')


// Je récupère l'ordre pour changer le SVG du tri alphabétique 
const urlParams = new URLSearchParams(window.location.search)
const ordre = urlParams.get('ordre')

// Ouvre le menu commentaire
filter.addEventListener("click", () => {
    filter_menu.classList.toggle("filter-menu-open")
})

// Filtre de jeux
document.querySelectorAll(".filter-menu>label>input").forEach(e => {
    e.addEventListener("change", function () {
        document.querySelector(".bestiary-container").classList.toggle(this.name)
    })
})

// Choix du SVG en fonction de l'ordre
if (ordre == 'ASC') {
    checkbox_label.innerHTML = `
            <svg fill="#FFEABC" width="32px" height="32px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path d="M7.90365714,19.8034496 C7.81268627,19.9276666 7.66576323,20.008331 7.5,20.008331 C7.33423677,20.008331 7.18731373,19.9276666 7.09634286,19.8034496 L4.14644661,16.8535534 C3.95118446,16.6582912 3.95118446,16.3417088 4.14644661,16.1464466 C4.34170876,15.9511845 4.65829124,15.9511845 4.85355339,16.1464466 L7,18.2928932 L7,4.5 C7,4.22385763 7.22385763,4 7.5,4 C7.77614237,4 8,4.22385763 8,4.5 L8,18.2928932 L10.1464466,16.1464466 C10.3417088,15.9511845 10.6582912,15.9511845 10.8535534,16.1464466 C11.0488155,16.3417088 11.0488155,16.6582912 10.8535534,16.8535534 L7.90365714,19.8034496 L7.90365714,19.8034496 Z M18.3229122,16.5 C18.7381226,16.8664722 19,17.4026537 19,18 C19,19.1045695 18.1045695,20 17,20 L13.5,20 C13.2238576,20 13,19.7761424 13,19.5 L13,13.5 C13,13.2238576 13.2238576,13 13.5,13 L17,13 C18.1045695,13 19,13.8954305 19,15 C19,15.5973463 18.7381226,16.1335278 18.3229122,16.5 Z M17.3333333,9 L14.6666667,9 L13.9615385,10.6923077 C13.8553299,10.9472083 13.562593,11.0677471 13.3076923,10.9615385 C13.0527917,10.8553299 12.9322529,10.562593 13.0384615,10.3076923 L15.5384615,4.30769231 C15.7094017,3.8974359 16.2905983,3.8974359 16.4615385,4.30769231 L18.9615385,10.3076923 C19.0677471,10.562593 18.9472083,10.8553299 18.6923077,10.9615385 C18.437407,11.0677471 18.1446701,10.9472083 18.0384615,10.6923077 L17.3333333,9 L17.3333333,9 Z M16.9166667,8 L16,5.8 L15.0833333,8 L16.9166667,8 Z M14,17 L14,19 L17,19 C17.5522847,19 18,18.5522847 18,18 C18,17.4477153 17.5522847,17 17,17 L14,17 Z M14,16 L17,16 C17.5522847,16 18,15.5522847 18,15 C18,14.4477153 17.5522847,14 17,14 L14,14 L14,16 Z"></path>
                </g>
            </svg>
        `;
} else if (ordre == 'DESC') {
    checkbox_label.innerHTML = `
            <svg fill="#FFEABC" width="32px" height="32px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path d="M8,5.70710678 L8,19.508331 C8,19.7844734 7.77614237,20.008331 7.5,20.008331 C7.22385763,20.008331 7,19.7844734 7,19.508331 L7,5.70710678 L4.85355339,7.85355339 C4.65829124,8.04881554 4.34170876,8.04881554 4.14644661,7.85355339 C3.95118446,7.65829124 3.95118446,7.34170876 4.14644661,7.14644661 L7.14644661,4.14644661 C7.34170876,3.95118446 7.65829124,3.95118446 7.85355339,4.14644661 L10.8535534,7.14644661 C11.0488155,7.34170876 11.0488155,7.65829124 10.8535534,7.85355339 C10.6582912,8.04881554 10.3417088,8.04881554 10.1464466,7.85355339 L8,5.70710678 Z M18.3229122,16.5 C18.7381226,16.8664722 19,17.4026537 19,18 C19,19.1045695 18.1045695,20 17,20 L13.5,20 C13.2238576,20 13,19.7761424 13,19.5 L13,13.5 C13,13.2238576 13.2238576,13 13.5,13 L17,13 C18.1045695,13 19,13.8954305 19,15 C19,15.5973463 18.7381226,16.1335278 18.3229122,16.5 Z M17.3333333,9 L14.6666667,9 L13.9615385,10.6923077 C13.8553299,10.9472083 13.562593,11.0677471 13.3076923,10.9615385 C13.0527917,10.8553299 12.9322529,10.562593 13.0384615,10.3076923 L15.5384615,4.30769231 C15.7094017,3.8974359 16.2905983,3.8974359 16.4615385,4.30769231 L18.9615385,10.3076923 C19.0677471,10.562593 18.9472083,10.8553299 18.6923077,10.9615385 C18.437407,11.0677471 18.1446701,10.9472083 18.0384615,10.6923077 L17.3333333,9 L17.3333333,9 Z M16.9166667,8 L16,5.8 L15.0833333,8 L16.9166667,8 Z M14,17 L14,19 L17,19 C17.5522847,19 18,18.5522847 18,18 C18,17.4477153 17.5522847,17 17,17 L14,17 Z M14,16 L17,16 C17.5522847,16 18,15.5522847 18,15 C18,14.4477153 17.5522847,14 17,14 L14,14 L14,16 Z"></path>
                </g>
            </svg>
        `;
} else {    //Si pas de parametre dans l'URL
    checkbox_label.innerHTML = `
            <svg fill="#FFEABC" width="32px" height="32px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path d="M7.90365714,19.8034496 C7.81268627,19.9276666 7.66576323,20.008331 7.5,20.008331 C7.33423677,20.008331 7.18731373,19.9276666 7.09634286,19.8034496 L4.14644661,16.8535534 C3.95118446,16.6582912 3.95118446,16.3417088 4.14644661,16.1464466 C4.34170876,15.9511845 4.65829124,15.9511845 4.85355339,16.1464466 L7,18.2928932 L7,4.5 C7,4.22385763 7.22385763,4 7.5,4 C7.77614237,4 8,4.22385763 8,4.5 L8,18.2928932 L10.1464466,16.1464466 C10.3417088,15.9511845 10.6582912,15.9511845 10.8535534,16.1464466 C11.0488155,16.3417088 11.0488155,16.6582912 10.8535534,16.8535534 L7.90365714,19.8034496 L7.90365714,19.8034496 Z M18.3229122,16.5 C18.7381226,16.8664722 19,17.4026537 19,18 C19,19.1045695 18.1045695,20 17,20 L13.5,20 C13.2238576,20 13,19.7761424 13,19.5 L13,13.5 C13,13.2238576 13.2238576,13 13.5,13 L17,13 C18.1045695,13 19,13.8954305 19,15 C19,15.5973463 18.7381226,16.1335278 18.3229122,16.5 Z M17.3333333,9 L14.6666667,9 L13.9615385,10.6923077 C13.8553299,10.9472083 13.562593,11.0677471 13.3076923,10.9615385 C13.0527917,10.8553299 12.9322529,10.562593 13.0384615,10.3076923 L15.5384615,4.30769231 C15.7094017,3.8974359 16.2905983,3.8974359 16.4615385,4.30769231 L18.9615385,10.3076923 C19.0677471,10.562593 18.9472083,10.8553299 18.6923077,10.9615385 C18.437407,11.0677471 18.1446701,10.9472083 18.0384615,10.6923077 L17.3333333,9 L17.3333333,9 Z M16.9166667,8 L16,5.8 L15.0833333,8 L16.9166667,8 Z M14,17 L14,19 L17,19 C17.5522847,19 18,18.5522847 18,18 C18,17.4477153 17.5522847,17 17,17 L14,17 Z M14,16 L17,16 C17.5522847,16 18,15.5522847 18,15 C18,14.4477153 17.5522847,14 17,14 L14,14 L14,16 Z"></path>
                </g>
            </svg>
        `;
}

// Si la checkbox est checked ou pas pour renvoyer dans l'URL l'info pour la requête SQL
checkbox.addEventListener('change', function () {
    if (this.checked) {
        var ordre = 'ASC';
    } else {
        var ordre = 'DESC';
    }

    window.location.href = '?ordre=' + ordre;
});